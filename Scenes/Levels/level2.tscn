[gd_scene format=4 uid="uid://dwuueukg6vtee"]

[ext_resource type="Script" uid="uid://cvqqmq04h5mxq" path="res://Scripts/level_starter.gd" id="1_0jhw5"]
[ext_resource type="TileSet" uid="uid://dv2ek4xnnct6f" path="res://Assets/Resources/ground_tileset.tres" id="2_eqosv"]
[ext_resource type="PackedScene" uid="uid://bojvjttovmt8" path="res://Scenes/wind_controller.tscn" id="3_6a7cf"]
[ext_resource type="Script" uid="uid://dvpqim5omfji7" path="res://Scripts/navigation_region_2d.gd" id="4_hpjhc"]
[ext_resource type="TileSet" uid="uid://b8bqcouefk1rw" path="res://Assets/Resources/wall_tileset.tres" id="5_56d2c"]
[ext_resource type="PackedScene" uid="uid://b25xtwhs2csqi" path="res://Scenes/movable_box.tscn" id="6_jywle"]
[ext_resource type="PackedScene" uid="uid://c2v52suxx5jrp" path="res://Scenes/Towers/ballista_tower.tscn" id="7_l1hk4"]
[ext_resource type="PackedScene" uid="uid://dm8wart2qijrc" path="res://Scenes/box.tscn" id="8_6a7cf"]
[ext_resource type="SpriteFrames" uid="uid://brjodx7c5pirw" path="res://Assets/Resources/bottle_sprite_frames.tres" id="8_b2fon"]
[ext_resource type="Script" uid="uid://ckq4offqa3gw8" path="res://Scripts/wind_bottle.gd" id="9_jydn8"]
[ext_resource type="PackedScene" uid="uid://cvyicx01sm07a" path="res://Scenes/level_menu.tscn" id="10_eqosv"]
[ext_resource type="PackedScene" uid="uid://lvc3cohw20il" path="res://Scenes/enemy_spawner.tscn" id="10_pwvbg"]
[ext_resource type="Script" uid="uid://bvjbq0juon6qg" path="res://Scripts/spawn_entry.gd" id="11_bngq1"]
[ext_resource type="PackedScene" uid="uid://q6a5e0rxses2" path="res://Scenes/loss_screen.tscn" id="12_56d2c"]
[ext_resource type="PackedScene" uid="uid://4xl7mw440pyc" path="res://Scenes/Enemies/normal_enemy.tscn" id="12_t6y87"]
[ext_resource type="PackedScene" uid="uid://sx0w03itiw5k" path="res://Scenes/win_screen.tscn" id="13_jywle"]
[ext_resource type="PackedScene" uid="uid://uk4xl3k6nbqj" path="res://Scenes/Enemies/heavy_enemy.tscn" id="13_keokt"]
[ext_resource type="PackedScene" uid="uid://j1ftmn1hkutc" path="res://Scenes/goal.tscn" id="14_cvw5d"]
[ext_resource type="PackedScene" uid="uid://1h0e0dpux851" path="res://Scenes/Levels/level3.tscn" id="14_jywle"]

[sub_resource type="NavigationPolygon" id="NavigationPolygon_ud172"]
vertices = PackedVector2Array(1306, 466.20313, 1306, 465.1875, 1319.6094, 465.82813, 1318.6016, 530, 1320.7969, 530, 1320.1563, 543.6094, 1256, 542.60156, 1128, 543.7969, 1050, 466.20313, 1050, 465.1875, 1178, 466.20313, 1256, 544.7969, 1178, 465.1875, 1896, 18, 1896, 544.7969, 1768, 543.7969, 1690, 96, 1768, 544.7969, 1690, 544.1875, 1128, 544.7969, 1000, 543.7969, 1000, 544.7969, 872, 543.7969, 872, 544.7969, 744, 543.7969, 744, 544.7969, 616, 543.7969, 616, 544.7969, 488, 543.7969, 488, 544.7969, 410, 544.1875, 410, 18, 872, 96, 872, 464.8125, 1128.8828, 285, 1574.6016, 274, 1576.7969, 274, 1434, 352, 1120.0469, 317.9375, 1562, 210.20313, 1562, 209.1875, 1575.6094, 209.82813, 986.2031, 224, 985.2031, 224, 985.8281, 210.38281, 1050, 211.39844, 1434, 210.20313, 1050, 209.1875, 1178, 210.20313, 1120, 228, 1095.9375, 227.95313, 1063, 219.11719, 1178, 209.1875, 1306, 210.20313, 1306, 209.1875, 1434, 209.1875, 1120.0469, 252.0625, 1575.7969, 402, 1576.7969, 402, 1576.0938, 493, 1560.6328, 493, 1558.9375, 491.3125, 1506, 477.1172, 1451.3672, 493, 1434, 493, 1453.0625, 491.3125, 1120, 252, 1120, 317.9922, 1120, 342, 1095.9922, 228, 1030.0625, 227.95313, 1030.0078, 228, 1006, 228, 985.2031, 352, 997.1172, 285, 1005.9531, 317.9375, 1006, 317.9922, 1006, 342, 1030.0078, 342, 1030.0625, 342.04688, 1095.9375, 342.04688, 1095.9922, 342, 1006, 252, 1005.9531, 252.0625, 1063, 350.8828, 486.1797, 768.8125, 1415, 675, 1454.2188, 675, 1506, 688.8828, 1125, 889, 1068, 880.1172, 1598.5781, 675, 1598.1875, 658, 1896, 658, 1896, 1117.25, 26, 1122.7266, 26, 1105.1875, 154, 1106.2031, 282, 1106.2031, 154, 1105.1875, 282, 1105.1875, 410, 1106.2031, 410, 1105.1875, 538, 1106.2031, 538, 1105.1875, 666, 1106.2031, 666, 1105.1875, 794, 1106.2031, 794, 1105.1875, 922, 1106.2031, 922, 1105.1875, 1050, 1106.2031, 1050, 1105.1875, 1178, 1106.2031, 1178, 1105.1875, 1306, 1106.2031, 295.79688, 146, 296.79688, 146, 295.79688, 274, 26, 992, 296.79688, 274, 295.79688, 402, 296.79688, 402, 295.79688, 530, 296.79688, 530, 295.79688, 658, 26, 18, 296.79688, 18, 1415, 658, 302, 770.1875, 302, 958, 1011, 978.9922, 1011, 992, 484.8203, 958, 1010.9531, 978.9375, 1002.1172, 946, 1010.9531, 913.0625, 1306, 1104, 1434, 1104, 1557.7813, 675, 1434, 992, 1125, 992, 1125, 978.9922, 1125.0469, 978.9375, 1133.8828, 946, 1125.0469, 913.0625, 1125, 913, 1011, 913, 1011, 889, 1100.9922, 889, 1100.9375, 888.9531, 1035.0625, 888.9531, 1035.0078, 889)
polygons = Array[PackedInt32Array]([PackedInt32Array(0, 1, 2, 3), PackedInt32Array(3, 4, 5, 6), PackedInt32Array(7, 8, 9, 10, 6, 11), PackedInt32Array(6, 10, 12, 0, 3), PackedInt32Array(13, 14, 15, 16), PackedInt32Array(15, 17, 18, 16), PackedInt32Array(7, 19, 20, 8), PackedInt32Array(20, 21, 22), PackedInt32Array(22, 23, 24), PackedInt32Array(24, 25, 26), PackedInt32Array(26, 27, 28), PackedInt32Array(28, 29, 30), PackedInt32Array(31, 13, 16, 32), PackedInt32Array(28, 30, 31, 32, 33), PackedInt32Array(26, 28, 33), PackedInt32Array(24, 26, 33), PackedInt32Array(22, 24, 33, 8), PackedInt32Array(20, 22, 8), PackedInt32Array(34, 35, 36, 37, 38), PackedInt32Array(39, 40, 41, 35), PackedInt32Array(42, 43, 44, 45), PackedInt32Array(39, 35, 34, 46), PackedInt32Array(45, 47, 48, 49, 50, 51), PackedInt32Array(48, 52, 53), PackedInt32Array(53, 54, 46), PackedInt32Array(46, 55, 39), PackedInt32Array(53, 46, 34), PackedInt32Array(48, 53, 34, 56), PackedInt32Array(57, 58, 59, 60, 61), PackedInt32Array(57, 61, 62, 37, 36), PackedInt32Array(63, 64, 37, 65), PackedInt32Array(62, 65, 37), PackedInt32Array(48, 56, 66, 49), PackedInt32Array(67, 38, 37, 68), PackedInt32Array(49, 69, 50), PackedInt32Array(45, 51, 70, 42), PackedInt32Array(42, 70, 71, 72), PackedInt32Array(73, 42, 72, 74), PackedInt32Array(75, 76, 77, 73), PackedInt32Array(77, 78, 79, 73), PackedInt32Array(80, 81, 68), PackedInt32Array(72, 82, 83), PackedInt32Array(72, 83, 74), PackedInt32Array(73, 74, 75), PackedInt32Array(73, 79, 84), PackedInt32Array(37, 73, 84), PackedInt32Array(68, 37, 84, 80), PackedInt32Array(85, 86, 87, 88, 89, 90), PackedInt32Array(91, 92, 93, 94), PackedInt32Array(95, 96, 97), PackedInt32Array(94, 95, 97, 98), PackedInt32Array(97, 99, 98), PackedInt32Array(98, 100, 101), PackedInt32Array(94, 98, 101), PackedInt32Array(101, 102, 103, 94), PackedInt32Array(103, 104, 105, 94), PackedInt32Array(105, 106, 107, 94), PackedInt32Array(107, 108, 109, 94), PackedInt32Array(109, 110, 111, 94), PackedInt32Array(111, 112, 113, 94), PackedInt32Array(113, 114, 115, 94), PackedInt32Array(116, 117, 118, 119), PackedInt32Array(118, 120, 121, 119), PackedInt32Array(121, 122, 123, 119), PackedInt32Array(123, 124, 125, 119), PackedInt32Array(126, 127, 116, 119), PackedInt32Array(125, 128, 86, 85, 129), PackedInt32Array(119, 125, 129, 130), PackedInt32Array(131, 132, 119, 130, 133, 134), PackedInt32Array(135, 134, 133, 85), PackedInt32Array(136, 135, 85), PackedInt32Array(115, 137, 138, 94), PackedInt32Array(139, 91, 94, 138, 140, 88), PackedInt32Array(140, 141, 142, 143), PackedInt32Array(140, 143, 144, 88), PackedInt32Array(88, 144, 145), PackedInt32Array(88, 145, 146, 89), PackedInt32Array(147, 136, 85, 148), PackedInt32Array(89, 149, 150), PackedInt32Array(151, 152, 148), PackedInt32Array(89, 150, 90), PackedInt32Array(148, 85, 90, 151)])
outlines = Array[PackedVector2Array]([PackedVector2Array(1973, -65, 1984, 1142, -65, 1148, -64, -73)])
agent_radius = 25.0

[sub_resource type="Resource" id="Resource_xqoth"]
script = ExtResource("11_bngq1")
scene = ExtResource("12_t6y87")
count = 5
spawn_rate = 2.0
metadata/_custom_type_script = "uid://bvjbq0juon6qg"

[sub_resource type="Resource" id="Resource_nqasx"]
script = ExtResource("11_bngq1")
scene = ExtResource("12_t6y87")
count = 3
metadata/_custom_type_script = "uid://bvjbq0juon6qg"

[sub_resource type="Resource" id="Resource_yxf76"]
script = ExtResource("11_bngq1")
scene = ExtResource("13_keokt")
count = 2
spawn_rate = 5.0
metadata/_custom_type_script = "uid://bvjbq0juon6qg"

[sub_resource type="Resource" id="Resource_t27xo"]
script = ExtResource("11_bngq1")
scene = ExtResource("12_t6y87")
count = 4
spawn_rate = 1.5
metadata/_custom_type_script = "uid://bvjbq0juon6qg"

[node name="level2" type="Node2D" unique_id=179991829 node_paths=PackedStringArray("spawners")]
script = ExtResource("1_0jhw5")
spawners = [NodePath("EnemySpawner")]

[node name="GroundLayer" type="TileMapLayer" parent="." unique_id=1395427363]
tile_map_data = PackedByteArray("AAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAUAAAAAAAAAAAD//wUAAAAAAAAAAAD//wYAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAcAAAAAAAAAAAABAAcAAAAAAAAAAAD/////AAAAAAAAAAD//wAAAAAAAAAAAAD//wEAAAAAAAAAAAD//wIAAAAAAAAAAAD//wMAAAAAAAAAAAD//wQAAAAAAAAAAAD//wcAAAAAAAAAAAD//wgAAAAAAAAAAAAAAP//AAAAAAAAAAAAAAgAAAAAAAAAAAABAP//AAAAAAAAAAABAAAAAAAAAAAAAAABAAEAAAAAAAAAAAABAAIAAAAAAAAAAAABAAMAAAAAAAAAAAABAAQAAAAAAAAAAAABAAUAAAAAAAAAAAABAAYAAAAAAAAAAAABAAgAAAAAAAAAAAACAP//AAAAAAAAAAACAAAAAAAAAAAAAAACAAEAAAAAAAAAAAACAAIAAAAAAAAAAAACAAMAAAAAAAAAAAACAAQAAAAAAAAAAAACAAUAAAAAAAAAAAACAAYAAAAAAAAAAAACAAcAAAAAAAAAAAACAAgAAAAAAAAAAAADAP//AAAAAAAAAAADAAAAAAAAAAAAAAADAAEAAAAAAAAAAAADAAIAAAAAAAAAAAADAAMAAAAAAAAAAAADAAQAAAAAAAAAAAADAAUAAAAAAAAAAAADAAYAAAAAAAAAAAADAAcAAAAAAAAAAAADAAgAAAAAAAAAAAAEAP//AAAAAAAAAAAEAAAAAAAAAAAAAAAEAAEAAAAAAAAAAAAEAAIAAAAAAAAAAAAEAAMAAAAAAAAAAAAEAAQAAAAAAAAAAAAEAAUAAAAAAAAAAAAEAAYAAAAAAAAAAAAEAAcAAAAAAAAAAAAEAAgAAAAAAAAAAAAFAP//AAAAAAAAAAAFAAAAAAAAAAAAAAAFAAEAAAAAAAAAAAAFAAIAAAAAAAAAAAAFAAMAAAAAAAAAAAAFAAQAAAAAAAAAAAAFAAUAAAAAAAAAAAAFAAYAAAAAAAAAAAAFAAcAAAAAAAAAAAAFAAgAAAAAAAAAAAAGAP//AAAAAAAAAAAGAAAAAAAAAAAAAAAGAAEAAAAAAAAAAAAGAAIAAAAAAAAAAAAGAAMAAAAAAAAAAAAGAAQAAAAAAAAAAAAGAAUAAAAAAAAAAAAGAAYAAAAAAAAAAAAGAAcAAAAAAAAAAAAGAAgAAAAAAAAAAAAHAP//AAAAAAAAAAAHAAAAAAAAAAAAAAAHAAEAAAAAAAAAAAAHAAIAAAAAAAAAAAAHAAMAAAAAAAAAAAAHAAQAAAAAAAAAAAAHAAUAAAAAAAAAAAAHAAYAAAAAAAAAAAAHAAcAAAAAAAAAAAAHAAgAAAAAAAAAAAAIAP//AAAAAAAAAAAIAAAAAAAAAAAAAAAIAAEAAAAAAAAAAAAIAAIAAAAAAAAAAAAIAAMAAAAAAAAAAAAIAAQAAAAAAAAAAAAIAAUAAAAAAAAAAAAIAAYAAAAAAAAAAAAIAAcAAAAAAAAAAAAIAAgAAAAAAAAAAAAJAP//AAAAAAAAAAAJAAAAAAAAAAAAAAAJAAEAAAAAAAAAAAAJAAIAAAAAAAAAAAAJAAMAAAAAAAAAAAAJAAQAAAAAAAAAAAAJAAUAAAAAAAAAAAAJAAYAAAAAAAAAAAAJAAcAAAAAAAAAAAAJAAgAAAAAAAAAAAAKAP//AAAAAAAAAAAKAAAAAAAAAAAAAAAKAAEAAAAAAAAAAAAKAAIAAAAAAAAAAAAKAAMAAAAAAAAAAAAKAAQAAAAAAAAAAAAKAAUAAAAAAAAAAAAKAAYAAAAAAAAAAAAKAAcAAAAAAAAAAAAKAAgAAAAAAAAAAAALAP//AAAAAAAAAAALAAAAAAAAAAAAAAALAAEAAAAAAAAAAAALAAIAAAAAAAAAAAALAAMAAAAAAAAAAAALAAQAAAAAAAAAAAALAAUAAAAAAAAAAAALAAYAAAAAAAAAAAALAAcAAAAAAAAAAAALAAgAAAAAAAAAAAAMAP//AAAAAAAAAAAMAAAAAAAAAAAAAAAMAAEAAAAAAAAAAAAMAAIAAAAAAAAAAAAMAAMAAAAAAAAAAAAMAAQAAAAAAAAAAAAMAAUAAAAAAAAAAAAMAAYAAAAAAAAAAAAMAAcAAAAAAAAAAAAMAAgAAAAAAAAAAAANAP//AAAAAAAAAAANAAAAAAAAAAAAAAANAAEAAAAAAAAAAAANAAIAAAAAAAAAAAANAAMAAAAAAAAAAAANAAQAAAAAAAAAAAANAAUAAAAAAAAAAAANAAYAAAAAAAAAAAANAAcAAAAAAAAAAAANAAgAAAAAAAAAAAAOAP//AAAAAAAAAAAOAAAAAAAAAAAAAAAOAAEAAAAAAAAAAAAOAAIAAAAAAAAAAAAOAAMAAAAAAAAAAAAOAAQAAAAAAAAAAAAOAAUAAAAAAAAAAAAOAAYAAAAAAAAAAAAOAAcAAAAAAAAAAAAOAAgAAAAAAAAAAAAPAP//AAAAAAAAAAAPAAAAAAAAAAAAAAAPAAEAAAAAAAAAAAAPAAIAAAAAAAAAAAAPAAMAAAAAAAAAAAAPAAQAAAAAAAAAAAAPAAUAAAAAAAAAAAAPAAYAAAAAAAAAAAAPAAcAAAAAAAAAAAAPAAgAAAAAAAAAAAA=")
tile_set = ExtResource("2_eqosv")

[node name="WindController" parent="." unique_id=1545098080 instance=ExtResource("3_6a7cf")]

[node name="NavigationRegion2D" type="NavigationRegion2D" parent="." unique_id=1302352236]
position = Vector2(-1, 7)
navigation_polygon = SubResource("NavigationPolygon_ud172")
script = ExtResource("4_hpjhc")

[node name="WallLayer" type="TileMapLayer" parent="NavigationRegion2D" unique_id=1728259221]
position = Vector2(1, -7)
tile_map_data = PackedByteArray("AAD/////BQABAAAAADAAAP//BQABAAAAADABAP//BQABAAAAADACAP//BQABAAAAADADAP//BQABAAAAADAEAP//BQABAAAAADAFAP//BQABAAAAADAGAP//BQABAAAAADAHAP//BQABAAAAADAIAP//BQABAAAAADAJAP//BQABAAAAADALAP//BQABAAAAADAMAP//BQABAAAAADANAP//BQABAAAAADAOAP//BQABAAAAADAPAP//BQABAAAAADAPAAAABQABAAAAAGAPAAEABQABAAAAAGAPAAIABQABAAAAAGAPAAMABQABAAAAAGAPAAQABQABAAAAAGAPAAUABQABAAAAAGAPAAYABQABAAAAAGAPAAcABQABAAAAAGAPAAgABQABAAAAAGD//wgABQABAAAAAFAAAAgABQADAAAAAAABAAgABQADAAAAAAACAAgABQADAAAAAAADAAgABQADAAAAAAAEAAgABQADAAAAAAAFAAgABQADAAAAAAAGAAgABQADAAAAAAAHAAgABQADAAAAAAAIAAgABQADAAAAAAAJAAgABQADAAAAAAAKAAgABQABAAAAAAD//wMABQABAAAAAFD//wQABQABAAAAAFD//wUABQABAAAAAFD//wYABQABAAAAAFD//wcABQABAAAAAFD//wAABQABAAAAAFD//wEABQABAAAAAFD//wIABQABAAAAAFAKAP//BQADAAAAADACAAAABQADAAAAAFACAAEABQADAAAAAFACAAIABQADAAAAAFACAAMABQADAAAAAFACAAQABQADAAAAAFADAAQABQADAAAAADAEAAQABQADAAAAADAFAAQABQADAAAAADAGAAQABQADAAAAADAHAAQABQADAAAAADAIAAQABQADAAAAADAJAAQABQADAAAAADAKAAQABQACAAAAADANAAQABQADAAAAADAOAAQABQADAAAAADAKAAMABQACAAAAAFAMAAEABQACAAAAAFAMAAIABQADAAAAAFAMAAMABQADAAAAAFAMAAQABQADAAAAAFALAAEABQADAAAAAAAKAAEABQADAAAAAAAJAAEABQADAAAAAAAIAAEABQADAAAAAAAJAAMABQADAAAAAAAIAAMABQADAAAAAAAHAAMABQADAAAAAAAHAAEABQACAAAAAAAHAAIABQADAAAAAGA=")
tile_set = ExtResource("5_56d2c")

[node name="RebakeTimer" type="Timer" parent="NavigationRegion2D" unique_id=344249157]
wait_time = 3.0
one_shot = true

[node name="MovableBox2" parent="NavigationRegion2D" unique_id=1673245718 instance=ExtResource("6_jywle")]
position = Vector2(1506, 583)

[node name="BallistaTower" parent="NavigationRegion2D" unique_id=1845065025 instance=ExtResource("7_l1hk4")]
position = Vector2(1063, 285)

[node name="BallistaTower2" parent="NavigationRegion2D" unique_id=1180314890 instance=ExtResource("7_l1hk4")]
position = Vector2(1068, 946)

[node name="Box" parent="NavigationRegion2D" unique_id=1615796132 instance=ExtResource("8_6a7cf")]
position = Vector2(393, 866)

[node name="UI" type="CanvasLayer" parent="." unique_id=1466918898]

[node name="AspectRatioContainer" type="AspectRatioContainer" parent="UI" unique_id=379839042]
anchors_preset = 1
anchor_left = 1.0
anchor_right = 1.0
offset_left = -61.0
offset_top = 75.0
offset_right = -21.0
offset_bottom = 115.0
grow_horizontal = 0

[node name="WindBottle" type="AnimatedSprite2D" parent="UI/AspectRatioContainer" unique_id=1140315212]
sprite_frames = ExtResource("8_b2fon")
animation = &"3"
speed_scale = 2.0
script = ExtResource("9_jydn8")

[node name="Panel" type="Panel" parent="UI/AspectRatioContainer/WindBottle" unique_id=416352261]
show_behind_parent = true
offset_left = -50.0
offset_top = -70.0
offset_right = 50.0
offset_bottom = 80.0

[node name="LevelMenu" parent="UI" unique_id=2140832043 instance=ExtResource("10_eqosv")]
visible = false

[node name="LossScreen" parent="UI" unique_id=1886424522 instance=ExtResource("12_56d2c")]
visible = false

[node name="WinScreen" parent="UI" unique_id=180070478 instance=ExtResource("13_jywle")]
visible = false
next_level = ExtResource("14_jywle")

[node name="EnemySpawner" parent="." unique_id=462682666 instance=ExtResource("10_pwvbg")]
position = Vector2(150, 191)
to_spawn = Array[ExtResource("11_bngq1")]([SubResource("Resource_xqoth"), SubResource("Resource_nqasx"), SubResource("Resource_yxf76"), SubResource("Resource_t27xo")])

[node name="Goal" parent="." unique_id=967983182 instance=ExtResource("14_cvw5d")]
position = Vector2(1751, 900)

[connection signal="timeout" from="NavigationRegion2D/RebakeTimer" to="NavigationRegion2D" method="_on_rebake_timer_timeout"]
